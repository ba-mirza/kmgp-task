<div class="min-h-screen flex flex-col items-center">
  <h1 class="mt-6 text-2xl font-medium mb-6">Список заказов</h1>

  <div class="w-full max-w-6xl">
    <label for="customerName">Поиск по клиенту</label>
    <div class="flex items-center gap-4 mb-2">
      <ui-input id="customerName" [control]="customerName" />
      <p-autocomplete
        [formControl]="statusControl"
        [dropdown]="true"
        [suggestions]="statusSuggestions()"
        (completeMethod)="search($event)"
        placeholder="Выберите статус"></p-autocomplete>
    </div>
    <p-table
      [value]="orders()"
      [rows]="ordersState.limit()"
      [rowsPerPageOptions]="[10, 25, 50]"
      [paginator]="true"
      [totalRecords]="totalRecords()"
      [lazy]="true"
      [scrollable]="totalRecords() > 20"
      [tableStyle]="{ 'min-width': '50rem' }"
      (onLazyLoad)="onPageChange($event)"
      (onSort)="onSort($event)"
      class="p-datatable-striped p-datatable-gridlines">
      <ng-template pTemplate="header">
        <tr>
          <th>Номер заказа</th>
          <th>Клиент</th>
          <th>Статус</th>
          <th pSortableColumn="total">
            Сумма
            <p-sortIcon field="total" />
          </th>
          <th pSortableColumn="createdAt">
            Дата создания
            <p-sortIcon field="createdAt" />
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-order>
        <tr class="cursor-pointer" (click)="openEditPage(order)">
          <td>{{ order.number }}</td>
          <td>{{ order.customerName }}</td>
          <td>
            <p-tag severity="info">{{ order.status }}</p-tag>
          </td>
          <td><strong>{{ order.total }}</strong></td>
          <td>{{ formattedDate(order.createdAt) }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
